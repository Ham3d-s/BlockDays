import{r as l,j as e}from"./index-j7YiF50A.js";import{f as b}from"./api-CuwL_8Yg.js";const f=!1;function h(i){if(!i)return{days:0,hours:0,minutes:0,seconds:0,expired:!0};const m=new Date(i),u=new Date,r=m.getTime()-u.getTime();if(r<=0)return{days:0,hours:0,minutes:0,seconds:0,expired:!0};const c=Math.floor(r/(1e3*60*60*24)),o=Math.floor(r%(1e3*60*60*24)/(1e3*60*60)),d=Math.floor(r%(1e3*60*60)/(1e3*60)),x=Math.floor(r%(1e3*60)/1e3);return{days:c,hours:o,minutes:d,seconds:x,expired:!1}}const N=()=>{const[i,m]=l.useState([]),[u,r]=l.useState([]),[c,o]=l.useState(!0),[d,x]=l.useState("");l.useEffect(()=>{(async()=>{try{if(o(!0),!f){const a=await b("upcoming-event.json");let t=Array.isArray(a)?a:[a];t=t.filter(n=>n&&n.title&&n.date),m(t)}}catch{x("خطا در بارگذاری رویدادهای آینده")}finally{o(!1)}})()},[]),l.useEffect(()=>{if(!i.length){r([]);return}const s=()=>{r(i.slice(0,3).map(t=>h(t.date)))};s();const a=setInterval(s,1e3);return()=>clearInterval(a)},[i]);const p=i.length===0&&!c?[]:i.filter(s=>s.active!==!1).slice(0,3);return c?e.jsx("section",{id:"upcoming-event-section",className:"py-20 bg-base-200",children:e.jsx("div",{className:"container mx-auto px-4 text-center",children:e.jsx("div",{className:"loading loading-spinner loading-lg"})})}):d||p.length===0?e.jsx("section",{id:"upcoming-event-section",className:"py-20 bg-base-200",children:e.jsx("div",{className:"container mx-auto px-4 text-center",children:e.jsx("p",{className:"text-error",children:d||"هیچ رویداد آینده‌ای ثبت نشده است."})})}):e.jsx("section",{id:"upcoming-event-section",className:"py-20 bg-base-200 scroll-animate",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-10 text-center",children:"رویدادهای آینده"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:p.map((s,a)=>{const t=u[a]||{days:0,hours:0,minutes:0,seconds:0,expired:!0};return e.jsxs("div",{className:"card bg-base-100 shadow-lg p-6 flex flex-col h-full",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("img",{src:`/images/gallery/event${a+1}.svg`,alt:s.title,className:"w-full h-40 object-cover rounded-lg mb-4",onError:n=>n.currentTarget.style.display="none"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:s.title}),s.tags&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2 justify-center",children:s.tags.map((n,g)=>e.jsx("span",{className:"badge badge-outline badge-primary",children:n},g))}),e.jsx("p",{className:"mb-2 text-sm opacity-80 min-h-[48px]",children:s.description})]}),t.expired?e.jsx("div",{className:"alert alert-info mb-4",children:e.jsx("span",{children:"زمان به پایان رسیده است."})}):e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[{value:t.days,label:"روز"},{value:t.hours,label:"ساعت"},{value:t.minutes,label:"دقیقه"},{value:t.seconds,label:"ثانیه"}].map((n,g)=>e.jsxs("div",{className:"bg-base-300 rounded-lg p-2 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:n.value}),e.jsx("div",{className:"text-xs opacity-80",children:n.label})]},g))}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mt-auto",children:t.expired?e.jsxs(e.Fragment,{children:[s.youtubeLink&&e.jsx("a",{href:s.youtubeLink,className:"btn btn-outline btn-error btn-sm",children:"یوتیوب"}),s.aparatLink&&e.jsx("a",{href:s.aparatLink,className:"btn btn-outline btn-sm",children:"آپارات"}),s.instagramLink&&e.jsx("a",{href:s.instagramLink,className:"btn btn-outline btn-accent btn-sm",children:"اینستاگرام"}),s.infoLink&&e.jsx("a",{href:s.infoLink,className:"btn btn-outline btn-info btn-sm",children:"اطلاعات"})]}):e.jsxs(e.Fragment,{children:[e.jsx("a",{href:s.registerLink,className:"btn btn-primary btn-sm",children:"ثبت نام"}),e.jsx("a",{href:s.detailsLink,className:"btn btn-outline btn-sm",children:"جزئیات"})]})})]},a)})})]})})};export{N as default};
